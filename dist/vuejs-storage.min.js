!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.vuejsStorage=e()}(this,function(){"use strict";function t(t){var e=t.storage,n=void 0===e?window.localStorage:e,r=t.stringify,i=void 0===r?JSON.stringify:r,o=t.parse,f=void 0===o?JSON.parse:o,s=t.namespace;return{set:function(t){n.setItem(s,i(t))},get:function(){return f(n.getItem(s))},exists:function(){return null!=n.getItem(s)}}}function e(t){return t.replace(/\[([^[\]]*)\]/g,".$1.").split(".").filter(function(t){return""!==t})}function n(t,n,r){for(var i=e(n),o=t,f=0;f<i.length-1;f++){var s=i[f];o.hasOwnProperty(s)||(o[s]={}),o=o[s]}o[i[i.length-1]]=r}function r(t,r,i){n(t,i,function(t,n){return e(n).reduce(function(t,e){return t&&t[e]},t)}(r,i))}function i(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];for(var f in o)o.hasOwnProperty(f)&&(t[f]=o[f])}return t}var o=function(e){return function(e){var n=t(e),o=e.keys,f=e.merge;return function(t){var e=null;if(n.exists())e=n.get();else{for(var s={},u=0,a=o;u<a.length;u++){var c=a[u];r(s,t.state,c)}e=s,n.set(e)}t.replaceState(f?f(t.state,e):i(t.state,e)),t.subscribe(function(t,e){var i={};o.forEach(function(t){return r(i,e,t)}),n.set(i)})}}(e)};return o.install=function(e){e.mixin({created:function(){if("storage"in this.$options){for(var e=this.$options.storage,o=e.keys,f=e.merge,s=t(e),u={},a=0,c=o;a<c.length;a++)r(u,this,c[a]);var l=null;if(s.exists())l=s.get();else{for(var g={},v=0,h=o;v<h.length;v++)r(g,u,h[v]);l=g,s.set(l)}l=f?f(u,l):i(u,l);for(var p=function(t){r(d,l,t),d.$watch(t,function(e){n(l,t,e),s.set(l)})},d=this,m=0,y=o;m<y.length;m++)p(y[m])}}})},o});
//# sourceMappingURL=vuejs-storage.min.js.map
