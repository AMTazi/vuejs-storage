{"version":3,"sources":["webpack://vuejsStorage/webpack/universalModuleDefinition","webpack://vuejsStorage/webpack/bootstrap","webpack://vuejsStorage/./node_modules/object-assign/index.js","webpack://vuejsStorage/./src/lsstorage.ts","webpack://vuejsStorage/./src/vuexplugin.ts","webpack://vuejsStorage/./src/install.ts","webpack://vuejsStorage/./src/index.ts"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","r","value","n","__esModule","object","property","prototype","hasOwnProperty","p","s","getOwnPropertySymbols","propIsEnumerable","propertyIsEnumerable","assign","test1","String","getOwnPropertyNames","test2","fromCharCode","map","join","test3","split","forEach","letter","keys","err","shouldUseNative","target","source","from","symbols","to","val","undefined","TypeError","toObject","arguments","length","key","createLSStorage","_a","_b","storage","localStorage","_c","stringify","JSON","_d","parse","namespace","set","setItem","getItem","exists","lsstorage_1","createVuexPlugin","option","ls","merge","store","data","state","replaceState","subscribe","mutation","obj","k","install","Vue","mixin","created","this","$options","ls_1","optdata","_i","keys_1","data_1","tmp","keys_2","this_1","$watch","keys_3","install_1","vuexplugin_1","vuejsStorage"],"mappings":"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","file":"vuejs-storage.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"vuejsStorage\"] = factory();\n\telse\n\t\troot[\"vuejsStorage\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n","/*\nobject-assign\n(c) Sindre Sorhus\n@license MIT\n*/\n\n'use strict';\n/* eslint-disable no-unused-vars */\nvar getOwnPropertySymbols = Object.getOwnPropertySymbols;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction toObject(val) {\n\tif (val === null || val === undefined) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction shouldUseNative() {\n\ttry {\n\t\tif (!Object.assign) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Detect buggy property enumeration order in older V8 versions.\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=4118\n\t\tvar test1 = new String('abc');  // eslint-disable-line no-new-wrappers\n\t\ttest1[5] = 'de';\n\t\tif (Object.getOwnPropertyNames(test1)[0] === '5') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test2 = {};\n\t\tfor (var i = 0; i < 10; i++) {\n\t\t\ttest2['_' + String.fromCharCode(i)] = i;\n\t\t}\n\t\tvar order2 = Object.getOwnPropertyNames(test2).map(function (n) {\n\t\t\treturn test2[n];\n\t\t});\n\t\tif (order2.join('') !== '0123456789') {\n\t\t\treturn false;\n\t\t}\n\n\t\t// https://bugs.chromium.org/p/v8/issues/detail?id=3056\n\t\tvar test3 = {};\n\t\t'abcdefghijklmnopqrst'.split('').forEach(function (letter) {\n\t\t\ttest3[letter] = letter;\n\t\t});\n\t\tif (Object.keys(Object.assign({}, test3)).join('') !==\n\t\t\t\t'abcdefghijklmnopqrst') {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t} catch (err) {\n\t\t// We don't expect any of the above to throw, but better to be safe.\n\t\treturn false;\n\t}\n}\n\nmodule.exports = shouldUseNative() ? Object.assign : function (target, source) {\n\tvar from;\n\tvar to = toObject(target);\n\tvar symbols;\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = Object(arguments[s]);\n\n\t\tfor (var key in from) {\n\t\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\t\tto[key] = from[key];\n\t\t\t}\n\t\t}\n\n\t\tif (getOwnPropertySymbols) {\n\t\t\tsymbols = getOwnPropertySymbols(from);\n\t\t\tfor (var i = 0; i < symbols.length; i++) {\n\t\t\t\tif (propIsEnumerable.call(from, symbols[i])) {\n\t\t\t\t\tto[symbols[i]] = from[symbols[i]];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to;\n};\n","import { Option, lsStorage } from './interfaces'\n\n/**\n * Create customize localStorage\n */\nexport function createLSStorage({\n\tstorage = window.localStorage,\n\tstringify = JSON.stringify,\n\tparse = JSON.parse,\n\tnamespace\n}: Option): lsStorage {\n\treturn {\n\t\tset(value) {\n\t\t\tstorage.setItem(namespace, stringify(value))\n\t\t},\n\t\tget() {\n\t\t\treturn parse(storage.getItem(namespace))\n\t\t},\n\t\texists() {\n\t\t\treturn storage.getItem(namespace) != null\n\t\t}\n\t}\n}\n","import { Store, VuexPlugin, Option } from './interfaces'\n\nimport { createLSStorage } from './lsstorage'\n\nimport * as assign from 'object-assign'\n\n/**\n * Create Vuex plugin\n */\nexport function createVuexPlugin(option: Option): VuexPlugin<Object> {\n\tconst ls = createLSStorage(option)\n\tconst { keys, merge } = option\n\treturn (store: Store<Object>) => {\n\t\tlet data = null\n\t\tif (ls.exists()) {\n\t\t\tdata = ls.get()\n\t\t} else {\n\t\t\tdata = store.state\n\t\t\tls.set(data)\n\t\t}\n\t\tstore.replaceState(merge ? merge(store.state, data) : assign(store.state, data)) //merge state\n\t\tstore.subscribe((mutation, state) => {\n\t\t\tconst obj = {}\n\t\t\tkeys.forEach(k => (obj[k] = state[k]))\n\t\t\tls.set(obj)\n\t\t})\n\t}\n}\n","import { VueConstructor, Option } from './interfaces'\n\nimport { createLSStorage } from './lsstorage'\n\nimport * as assign from 'object-assign'\n\nexport function install(Vue: VueConstructor) {\n\tVue.mixin({\n\t\tcreated() {\n\t\t\tif ('storage' in this.$options) {\n\t\t\t\tconst option: Option = this.$options.storage\n\t\t\t\tconst { keys, merge } = option\n\n\t\t\t\tconst ls = createLSStorage(option)\n\n\t\t\t\tlet optdata = {};\n\t\t\t\tfor (const k of keys) {\n\t\t\t\t\toptdata[k] = this[k]\n\t\t\t\t}\n\n\t\t\t\tlet data = null\n\t\t\t\tif (ls.exists()) {\n\t\t\t\t\tdata = ls.get()\n\t\t\t\t} else {\n\t\t\t\t\tconst tmp = {}\n\t\t\t\t\tfor (const k of keys) {\n\t\t\t\t\t\ttmp[k] = optdata[k]\n\t\t\t\t\t}\n\t\t\t\t\tdata = tmp\n\t\t\t\t\tls.set(data)\n\t\t\t\t}\n\t\t\t\tdata = merge ? merge(optdata, data) : assign(optdata, data)\n\n\t\t\t\tfor (const k of keys) {\n\t\t\t\t\tthis[k] = data[k]\n\t\t\t\t\tthis.$watch(k, (value) => {\n\t\t\t\t\t\tdata[k] = value\n\t\t\t\t\t\tls.set(data)\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n}\n","import { Vue, VueConstructor, VuexPlugin } from './interfaces'\n\nimport { install } from './install'\nimport { createVuexPlugin } from './vuexplugin'\nimport { createLSStorage } from './lsstorage'\n\ninterface vjs {\n\t(): VuexPlugin<Object>\n\tinstall: (Vue: VueConstructor) => any\n}\nconst vuejsStorage = <vjs>function(option) {\n\treturn createVuexPlugin(option)\n}\nvuejsStorage.install = install\n\ndeclare var module: {\n\texports: {}\n}\nmodule.exports = vuejsStorage\n"],"sourceRoot":""}