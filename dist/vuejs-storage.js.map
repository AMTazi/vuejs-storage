{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 3461a4d77852630b90b7","webpack:///./src/lsstorage.ts","webpack:///./src/assign.ts","webpack:///./src/index.ts","webpack:///./src/install.ts","webpack:///./src/vuexplugin.ts"],"names":[],"mappings":"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","file":"vuejs-storage.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"vuejsStorage\"] = factory();\n\telse\n\t\troot[\"vuejsStorage\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 3461a4d77852630b90b7","import { Option, lsStorage } from './interfaces'\n\n/**\n * Create customize localStorage\n */\nexport function createLSStorage({\n\tstorage = window.localStorage,\n\tstringify = JSON.stringify,\n\tparse = JSON.parse\n}: Option): lsStorage {\n\treturn {\n\t\tsetItem(key, value) {\n\t\t\tstorage.setItem(key, stringify(value))\n\t\t},\n\t\tremoveItem(key) {\n\t\t\tstorage.removeItem(key)\n\t\t},\n\t\tgetItem(key) {\n\t\t\treturn parse(storage.getItem(key))\n\t\t}\n\t}\n}\n\n\n// WEBPACK FOOTER //\n// ./src/lsstorage.ts","export function assign(dest: object, source: object): object {\n\tfor (const k in source) {\n\t\tdest[k] = source[k]\n\t}\n\treturn dest\n}\n\n\n// WEBPACK FOOTER //\n// ./src/assign.ts","import { Vue, VueConstructor,VuexPlugin } from './interfaces'\n\nimport { install } from './install'\nimport { createVuexPlugin } from './vuexplugin'\n\ninterface vjs {\n\t(): VuexPlugin<Object>,\n\tinstall: (Vue: VueConstructor) => any\n}\nconst vuejsStorage = <vjs>function (option) {\n\treturn createVuexPlugin(option)\n}\nvuejsStorage.install = install\n\ndeclare var module: {\n\texports: {}\n}\nmodule.exports = vuejsStorage\n\n\n// WEBPACK FOOTER //\n// ./src/index.ts","import { VueConstructor, StorageOption } from './interfaces'\n\nimport { createLSStorage } from './lsstorage'\nimport { assign } from './assign'\n\nexport function install(Vue: VueConstructor) {\n\tVue.mixin({\n\t\tbeforeCreate() {\n\t\t\tif ('storage' in this.$options) {\n\t\t\t\tlet option: StorageOption = this.$options.storage\n\t\t\t\tif (this.$options.storage instanceof Function) { //storage(){...} syntax\t\n\t\t\t\t\toption = this.$options.storage.apply(this)\n\t\t\t\t}\n\n\t\t\t\tconst ls = createLSStorage(option)\n\t\t\t\toption.data = assign(option.data, ls.getItem(option.namespace))\n\n\t\t\t\tlet data = this.$options.data || {}\n\t\t\t\tif (this.$options.data instanceof Function) { //data(){...} syntax\n\t\t\t\t\tdata = this.$options.data.apply(this)\n\t\t\t\t}\n\t\t\t\tthis.$options.data = assign(data, option.data) //merge storage's data into data\n\n\t\t\t\t//if no 'watch' option\n\t\t\t\tif (!('watch' in this.$options)) {\n\t\t\t\t\tthis.$options.watch = {}\n\t\t\t\t}\n\t\t\t\tfor (let key in option.data) {//create watchers\n\t\t\t\t\tlet watcher: Function = () => { }\n\t\t\t\t\tif (key in this.$options.watch) {//backup original watcher\n\t\t\t\t\t\twatcher = <Function>this.$options.watch[key]\n\t\t\t\t\t}\n\t\t\t\t\tthis.$options.watch[key] = value => {\n\t\t\t\t\t\toption.data[key] = value\n\t\t\t\t\t\tls.setItem(option.namespace, option.data)\n\t\t\t\t\t\twatcher.call(this, value)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t})\n}\n\n\n// WEBPACK FOOTER //\n// ./src/install.ts","import { Store, VuexPlugin, Option } from './interfaces'\n\nimport { createLSStorage } from './lsstorage'\nimport { assign } from './assign'\n\n/**\n * Create Vuex plugin\n */\nexport function createVuexPlugin(option: Option): VuexPlugin<Object> {\n\tconst ls = createLSStorage(option)\n\treturn (store: Store<Object>) => {\n\t\tlet data = store.state\n\t\tdata = assign(data, ls.getItem(option.namespace)) //merge data\n\t\tstore.replaceState(data) //set state\n\t\tstore.subscribe((mutation, state) => {\n\t\t\tls.setItem(option.namespace, state)\n\t\t})\n\t}\n}\n\n\n// WEBPACK FOOTER //\n// ./src/vuexplugin.ts"],"sourceRoot":""}