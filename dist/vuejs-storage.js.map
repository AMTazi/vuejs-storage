{"version":3,"sources":["webpack://vuejsStorage/webpack/universalModuleDefinition","webpack://vuejsStorage/webpack/bootstrap","webpack://vuejsStorage/./src/lsstorage.ts","webpack://vuejsStorage/./src/vuexplugin.ts","webpack://vuejsStorage/./src/install.ts","webpack://vuejsStorage/./src/index.ts"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","r","value","n","__esModule","object","property","prototype","hasOwnProperty","p","s","createLSStorage","_a","_b","storage","localStorage","_c","stringify","JSON","_d","parse","setItem","key","removeItem","getItem","lsstorage_1","assign","createVuexPlugin","option","ls","store","data","state","namespace","replaceState","subscribe","mutation","install","Vue","mixin","beforeCreate","_this","this","$options","option_1","Function","apply","ls_1","watch","watcher","this_1","install_1","vuexplugin_1","vuejsStorage"],"mappings":"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","file":"vuejs-storage.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"vuejsStorage\"] = factory();\n\telse\n\t\troot[\"vuejsStorage\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n","import { Option, lsStorage } from './interfaces'\n\n/**\n * Create customize localStorage\n */\nexport function createLSStorage({\n\tstorage = window.localStorage,\n\tstringify = JSON.stringify,\n\tparse = JSON.parse\n}: Option): lsStorage {\n\treturn {\n\t\tsetItem(key, value) {\n\t\t\tstorage.setItem(key, stringify(value))\n\t\t},\n\t\tremoveItem(key) {\n\t\t\tstorage.removeItem(key)\n\t\t},\n\t\tgetItem(key) {\n\t\t\treturn parse(storage.getItem(key))\n\t\t}\n\t}\n}","import { Store, VuexPlugin, VuexOption } from './interfaces'\n\nimport { createLSStorage } from './lsstorage'\n\nconst assign = (<any>Object).assign\n\n/**\n * Create Vuex plugin\n */\nexport function createVuexPlugin(option: VuexOption): VuexPlugin<Object> {\n\tconst ls = createLSStorage(option)\n\treturn (store: Store<Object>) => {\n\t\tlet data = store.state\n\t\tdata = assign(data, ls.getItem(option.namespace)) //merge data\n\t\tstore.replaceState(data) //set state\n\t\tstore.subscribe((mutation, state) => {\n\t\t\tls.setItem(option.namespace, state)\n\t\t})\n\t}\n}","import { VueConstructor, StorageOption } from './interfaces'\n\nimport { createLSStorage } from './lsstorage'\n\nconst assign = (<any>Object).assign\n\nexport function install(Vue: VueConstructor) {\n\tVue.mixin({\n\t\tbeforeCreate() {\n\t\t\tif ('storage' in this.$options) {\n\t\t\t\tlet option: StorageOption = this.$options.storage\n\t\t\t\tif (this.$options.storage instanceof Function) {\n\t\t\t\t\t//storage(){...} syntax\n\t\t\t\t\toption = this.$options.storage.apply(this)\n\t\t\t\t}\n\n\t\t\t\tconst ls = createLSStorage(option)\n\t\t\t\toption.data = assign(option.data, ls.getItem(option.namespace))\n\t\t\t\tls.setItem(option.namespace, option.data)\n\n\t\t\t\tlet data = this.$options.data || {}\n\t\t\t\tif (this.$options.data instanceof Function) {\n\t\t\t\t\t//data(){...} syntax\n\t\t\t\t\tdata = this.$options.data.apply(this)\n\t\t\t\t}\n\t\t\t\tthis.$options.data = assign(data, option.data) //merge storage's data into data\n\n\t\t\t\t//if no 'watch' option\n\t\t\t\tif (!('watch' in this.$options)) {\n\t\t\t\t\tthis.$options.watch = {}\n\t\t\t\t}\n\t\t\t\tfor (let key in option.data) {\n\t\t\t\t\t//create watchers\n\t\t\t\t\tlet watcher: Function = null\n\t\t\t\t\tif (key in this.$options.watch) {\n\t\t\t\t\t\t//backup original watcher\n\t\t\t\t\t\twatcher = <Function>this.$options.watch[key]\n\t\t\t\t\t}\n\t\t\t\t\tthis.$options.watch[key] = value => {\n\t\t\t\t\t\toption.data[key] = value\n\t\t\t\t\t\tls.setItem(option.namespace, option.data)\n\t\t\t\t\t\tif (watcher !== null) watcher.call(this, value)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t})\n}\n","import { Vue, VueConstructor,VuexPlugin } from './interfaces'\n\nimport { install } from './install'\nimport { createVuexPlugin } from './vuexplugin'\n\ninterface vjs {\n\t(): VuexPlugin<Object>,\n\tinstall: (Vue: VueConstructor) => any\n}\nconst vuejsStorage = <vjs>function (option) {\n\treturn createVuexPlugin(option)\n}\nvuejsStorage.install = install\n\ndeclare var module: {\n\texports: {}\n}\nmodule.exports = vuejsStorage"],"sourceRoot":""}